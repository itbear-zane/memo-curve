# MemoCurve

一个基于 React + TypeScript + Vite 构建的艾宾浩斯记忆曲线应用，帮助你科学高效地记忆和管理知识点。

## 🌟 特性

- **艾宾浩斯记忆曲线**：基于科学的遗忘曲线理论，自动安排复习计划
- **多平台支持**：支持 GitHub Pages 和 Gitee Pages 双平台部署
- **分类管理**：灵活的分类系统，支持不同学科的知识点管理
- **图片支持**：支持上传和压缩图片，制作图文并茂的学习笔记
- **本地存储**：使用 IndexedDB 大容量本地存储，数据安全可靠
- **响应式设计**：完美适配手机端和桌面端
- **PWA 支持**：可安装为桌面应用，离线可用

## 🆕 New Feats

### 多图片上传功能
- **批量图片上传**：支持一次选择多张图片上传，提高添加图片笔记的效率
- **批量图片处理**：所有选中的图片会按顺序压缩并添加到笔记中
- **多图片显示**：在笔记中正确显示所有上传的图片
- **保持删除功能**：仍然支持单独删除不需要的图片

### 图片查看与编辑功能增强
- **图片缩略图预览**：在笔记列表中显示图片缩略图，直观识别包含图片的笔记
- **完整的图片管理**：在笔记编辑器中可以查看、添加、删除图片
- **图片编辑支持**：支持在现有笔记中修改图片内容
- **图片压缩优化**：自动压缩上传的图片，确保存储效率

### 用户体验改进
- **视觉反馈**：通过缩略图快速识别图片笔记
- **操作便捷**：点击笔记即可查看和编辑所有图片
- **一致性**：图片管理功能与创建新笔记时的体验保持一致

### 表单状态保持优化
- **智能表单状态保持**：添加笔记时上传的图片会在页面刷新或导航后自动恢复
- **防止数据丢失**：当标题验证失败时，已上传的图片不会丢失
- **临时状态存储**：使用sessionStorage临时保存表单状态，提升用户体验
- **自动清理**：成功保存笔记后自动清理临时状态，确保下次创建笔记时表单干净

### 高考专用记忆曲线
- **高考高频冲刺**：38次复习，覆盖整个高考备战周期，前10天每天复习，后续逐步拉长间隔
- **高考分层复习**：分层级复习策略，前5天每天复习，中期每2-3天复习，后期每周复习
- **英语单词专项**：90次超高频复习，特别适合英语单词记忆，前15天每天复习，确保长期记忆效果

### 自定义遗忘曲线编辑功能
- **可视化曲线编辑**：点击新建按钮弹出编辑模态框，直观自定义遗忘曲线
- **即时保存**：曲线编辑完成后立即保存到本地存储，无需手动点击保存
- **灵活间隔设置**：支持自定义复习间隔天数，用逗号分隔输入
- **输入验证**：自动验证曲线名称和间隔天数的有效性
- **点击编辑**：支持点击现有曲线名称或间隔区域进行编辑

### 复习曲线可视化功能
- **交互式曲线可视化**：点击眼睛图标查看每个复习曲线的可视化图表
- **复习时间点分布**：展示复习时间点在天数轴上的分布，直观理解不同曲线的差异
- **详细间隔信息**：可展开查看每次复习的具体天数和间隔天数
- **智能显示优化**：长间隔列表自动截断显示，保持界面美观
- **多曲线对比**：通过可视化图表直观比较不同复习策略的时间分布特点

### 复习间隔计算优化
- **正确间隔计算**：修复了遗忘曲线间隔计算的逻辑错误，确保复习时间点准确
- **累计天数理解**：正确理解间隔数组为"从第0天开始的累计天数"而非"相邻间隔天数"
- **实际间隔计算**：复习间隔 = 下一次复习累计天数 - 当前复习累计天数
- **显示优化**：在复习界面中正确显示下一次复习的实际间隔天数

### 复习会话滑动导航功能
- **左右滑动导航**：在复习会话中支持左右滑动切换笔记
- **向左滑动**：查看下一个待复习笔记
- **向右滑动**：查看上一个待复习笔记
- **平滑动画**：添加滑动切换的平滑动画效果
- **灵活浏览**：支持在显示答案时继续滑动浏览其他笔记

### 复习会话滑动动画优化
- **丝滑滑动体验**：优化滑动动画，消除闪烁问题，提供更流畅的切换体验
- **实时视觉反馈**：滑动时显示进度指示器和方向提示
- **防重复触发**：添加动画状态管理，防止快速连续滑动导致的动画冲突
- **优雅过渡效果**：使用CSS `transition-all` 和 `ease-out` 缓动函数，配合缩放和透明度变化
- **触摸事件优化**：改进触摸事件处理，提供更精准的滑动识别

### 复习时间显示逻辑优化
- **精确日期处理**：引入date-fns库，提供更准确的日期计算和比较
- **智能时间显示**：优化复习时间显示逻辑，使用"今天"和"已过期"的精确判断
- **改进首次复习**：新添加的笔记会根据所选遗忘曲线的第一个间隔计算首次复习时间
- **阶段显示优化**：将"Lv.0"改为"今日新添加"，更直观地显示笔记状态
- **过期判断优化**：基于当天结束时间判断笔记是否过期，避免过早显示"已过期"

### 隐藏默认分类功能
- **界面整洁优化**：隐藏"未分类"等默认分类，保持界面简洁
- **智能分类管理**：自动隐藏系统默认分类，只显示用户创建的分类
- **分类显示切换**：支持分类的显示/隐藏切换，灵活管理分类界面
- **用户体验提升**：优化分类管理界面，减少视觉干扰，专注用户内容

### 分类拖拽排序功能
- **直观的拖拽排序**：在分类管理界面支持拖拽调整分类顺序
- **实时视觉反馈**：拖拽过程中提供视觉反馈，包括阴影和缩放效果
- **自动保存排序**：拖拽完成后自动保存排序到IndexedDB数据库
- **拖拽手柄图标**：每个分类左侧显示拖拽手柄图标，操作直观明了
- **统一排序体验**：仪表板和分类管理界面都使用统一的排序顺序
- **新分类自动排序**：新增分类自动添加到排序列表末尾

### 概览模块历史行为记录功能
- **今日统计面板**：实时显示今日新增笔记数和完成复习数，帮助用户了解当日学习进度
- **智能记忆准确率**：计算所有复习历史中"记得"的比例，科学评估记忆效果
- **分层统计展示**：总体统计与今日统计分离，信息层次清晰，便于快速获取关键数据
- **可视化数据分析**：点击"查看详情"打开数据分析模态框，提供深入的学习行为洞察
- **分类分布饼图**：直观展示各分类笔记数量分布，提供全面的学习内容概览
- **学习趋势分析**：展示最近7天学习笔记数量的折线图，帮助用户了解学习习惯和规律
- **智能完成率计算**：排除当天新添加笔记，准确计算各分类复习完成率，避免误导性0%显示
- **交互式图表体验**：支持标签页切换、展开/隐藏控制，提供灵活的数据查看方式
- **响应式图表设计**：完美适配移动端和桌面端，确保在不同设备上的最佳体验

### 今日新增笔记分布分析功能
- **独立今日新增Tab**：在数据分析模态框中新增专门的"今日新增"标签页，与分类分布、学习趋势、完成率同级别显示
- **今日新增饼图可视化**：使用饼状图直观展示今日新增笔记在各分类中的分布情况，便于了解今日学习重点
- **分类分布统计**：精确显示今日每个分类新增的笔记数量，使用绿色主题突出今日内容
- **智能空状态提示**：当今日暂无新增笔记时，显示友好的空状态界面和引导提示
- **避免功能重复**：移除Dashboard中的重复显示，将相关分析功能统一集中在分析详情模态框中
- **优化的用户体验**：通过Tab切换快速访问不同维度的学习数据分析，提升界面的组织性和使用效率

### 每日详细统计报告导出功能
- **一键导出完整报告**：点击"导出详细报告"按钮即可生成包含所有统计数据的精美图片
- **全面的数据覆盖**：导出内容包括今日统计、总体概览、分类分布、今日新增分布、学习趋势、完成率等所有概览数据
- **专业可视化设计**：生成的报告采用专业的配色方案和布局设计，包含图表数据的可视化展示
- **高质量图片输出**：使用html2canvas生成高分辨率PNG图片，适合保存和分享
- **智能数据展示**：根据数据存在情况智能显示相应模块，空数据时显示友好提示
- **时间戳记录**：自动在报告中添加导出时间，便于追踪学习进度历史

## 🚀 快速开始

### 环境要求

- Node.js 18+
- npm 或 yarn

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

### 构建部署

```bash
# 部署到 GitHub Pages
npm run deploy

# 部署到 GitLab Pages
npm run deploy:gitlab
```

## 📱 在线体验

- **GitHub Pages**: [https://itbear-zane.github.io/memo-curve](https://itbear-zane.github.io/memo-curve)
- **GitLab Pages**: [https://itbear-zane.gitlab.io/memo-curve](https://itbear-zane.gitlab.io/memo-curve)

## 🛠️ 技术栈

- **前端框架**：React 19 + TypeScript
- **构建工具**：Vite
- **UI 组件**：Tailwind CSS
- **图标库**：Lucide React
- **数据存储**：IndexedDB
- **部署平台**：GitHub Pages + GitLab Pages

## 📖 使用说明

### 1. 创建笔记
- 点击底部的 "+" 按钮
- 选择分类和复习策略
- 输入标题和内容
- 可选择添加图片

### 2. 复习功能
- 系统会根据艾宾浩斯曲线自动计算复习时间
- 点击"开始复习"进入复习模式
- 根据记忆情况选择"记得"或"忘记了"

### 3. 分类管理
- 在分类管理页面可以添加、删除分类
- 每个分类有独立的颜色标识
- 支持查看分类下的所有笔记

### 4. 个性化设置
- 可以自定义复习曲线间隔
- 开启/关闭复习通知
- 导出/备份数据

## 🔧 开发

### 项目结构

```
memo-curve/
├── src/
│   ├── App.tsx          # 主应用组件
│   ├── index.css        # 全局样式
│   └── ...             # 其他组件和文件
├── scripts/            # 部署脚本
│   └── deploy-gitlab.js # GitLab Pages 部署脚本
├── dist/               # 构建输出目录
└── package.json        # 项目配置
```

### 可用脚本

```bash
npm run dev          # 启动开发服务器
npm run build        # 构建生产版本
npm run preview      # 预览构建结果
npm run lint         # 代码检查
npm run deploy       # 部署到 GitHub Pages
npm run deploy:gitlab # 部署到 GitLab Pages
```

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

---

Made with ❤️ using React + TypeScript + Vite